@page "/login"
@layout Layout.AuthLayout

<PageTitle>Login</PageTitle>
<AuthorizeView>
    <Authorized>
        <MudGrid Spacing="1" Justify="Justify.SpaceBetween">
            <MudItem lg="12" md="12" sm="12">
                <MudStack Row Justify="Justify.Center">
                    <MudProgressCircular Color="Color.Info" Size="Size.Medium" Indeterminate="true" />
                    <MudText Typo="Typo.body2" Class="py-2"> Redirecting...</MudText>
                </MudStack>
            </MudItem>
        </MudGrid>
    </Authorized>
    <NotAuthorized>
        <MudItem>
            <MudCard Elevation="4" Class="pa-3">
                <MudCardContent>
                    <MudGrid Spacing="1" Justify="Justify.SpaceBetween">
                        <MudStack Spacing="0">
                            <MudStack Row>
                                <MudItem>
                                    <MudImage Width="100" Height="100" Src="favicon.png" Alt="Logo"></MudImage>
                                </MudItem>
                                <MudItem>
                                    <MudText Typo="Typo.h4" Color="Color.Info"><strong>A</strong>partment</MudText>
                                    <MudText Typo="Typo.h4" Color="Color.Info"><strong>M</strong>anagement</MudText>
                                    <MudText Typo="Typo.h4" Color="Color.Info"><strong>S</strong>ystem</MudText>
                                </MudItem>
                            </MudStack>
                            <MudForm Model="@loginModel" @ref="@loginForm" Validation="@(loginValidator.ValidateValue)" ValidationDelay="0" Spacing="2">
                                <MudTextField @bind-Value="loginModel.UserName" For="@(() => loginModel.UserName)" Label="Username" OnKeyUp="KeyDownSubmit" />
                                <MudTextField @bind-Value="loginModel.Password" For="@(() => loginModel.Password)" Class="pb-3" OnKeyUp="KeyDownSubmit"
                                              Label="Password" InputType="@(showPassword?InputType.Text:InputType.Password)"
                                              AdornmentIcon="@(showPassword?"fa-solid fa-eye-slash":"fa-solid fa-eye")" Adornment="Adornment.End"
                                              IconSize="Size.Medium" OnAdornmentClick="@(() => showPassword = !showPassword)" />
                            </MudForm>
                                <MudCheckBox @bind-Value="RememberMe.Remember" Label="Remember Me"></MudCheckBox>
                            <MudButton OnClick="Authenticate" Variant="Variant.Filled" Color="Color.Info" Class="rounded-pill" FullWidth>Login</MudButton>
                            <MudStack Spacing="0" AlignItems="AlignItems.Center" Class="pt-5">
                                <MudText Typo="Typo.caption">AMS @version</MudText>
                                <MudText Typo="Typo.caption" Class="pb-3">All Rights Reserved. &copy; 2024</MudText>
                                <MudStack Row AlignItems="AlignItems.Center">
                                    <MudText Typo="Typo.caption">Developed by: </MudText>
                                    <MudImage Src="dev.png" Height="25" Width="75" />
                                </MudStack>
                            </MudStack>
                        </MudStack>
                    </MudGrid>
                </MudCardContent>
            </MudCard>
        </MudItem>
    </NotAuthorized>

</AuthorizeView>
